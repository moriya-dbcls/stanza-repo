{"version":3,"file":"column_tree_view.js","sources":["stanza-repo/column_tree_view/index.js","stanza-repo/column_tree_view.js"],"sourcesContent":["export default function columnTreeView(stanza, params) {\n\n    let fetchReq = (query, callback, depth) => {\n        let options = {\n\t    method: 'post',\n\t    mode: 'cors',\n\t    headers: {'Content-Type': 'application/x-www-form-urlencoded', 'Accept': 'application/json'},\n\t    body: 'query=' + encodeURIComponent(query)\n\t}\n        // set timeout of fetch\n        let fetch_timeout = function(ms, promise) {\n            return new Promise(function(resolve, reject) {\n                setTimeout(function() {\n                    reject(new Error(\"timeout\"))\n                }, ms)\n                promise.then(resolve, reject)\n            })\n        }\n        try{\n            fetch_timeout(120000, fetch(params.endpoint, options)).then(res=>{\n                if(res.ok) return res.json()\n                else return false;\n            }).then(function(json){callback(json, depth)});\n        }catch(error){\n            console.log(error);\n        }\n    };\n\n    let sparqlQuery = {\n\tgraph: params.graph || \"\",\n\tsubclass: params.subclass || \"http://www.w3.org/2000/01/rdf-schema#subClassOf\", \n\tlabel: params.label || \"http://www.w3.org/2000/01/rdf-schema#label\"\n    };\n    if(sparqlQuery.graph) sparqlQuery.graph = \" FROM <\" + sparqlQuery.graph + \">\";\n    if(sparqlQuery.subclass.match(/[^\\s]\\s+[^\\s]/)){\n\tlet list = [];\n\tfor(let p of sparqlQuery.subclass.split(/\\s+/)){\n\t    if(p.match(/^http/)) list.push(\"<\" + p + \">\");\n\t}\n\tsparqlQuery.subclass = \"(\" + list.join(\"|\") + \")\";\n    }else{\n\tsparqlQuery.subclass = \"<\" + sparqlQuery.subclass + \">\";\n    }\n    \n    let firstQuery = \"SELECT DISTINCT ?label (SAMPLE (?leafs) AS ?leaf)\" + sparqlQuery.graph + \" WHERE { <\" + params.root + \"> <\" + sparqlQuery.label + \"> ?label . OPTIONAL {?leafs \" + sparqlQuery.subclass + \" ?root . } }\";\n    \n    let makeQuery = (uri) => {\n\treturn \"SELECT DISTINCT ?parent ?child ?label (SAMPLE (?leafs) AS ?leaf)\" + sparqlQuery.graph + \" WHERE { VALUES ?parent { <\" + uri + \"> } ?child \" + sparqlQuery.subclass + \" ?parent . ?child <\" + sparqlQuery.label + \"> ?label . OPTIONAL {?leafs \" + sparqlQuery.subclass + \" ?child . } } ORDER BY ?label\";\n    }\n\n    let searchQueryByBifContains = (string) => {\n\tlet words = string.split(/[^\\w]+/);\n\tlet query = \"PREFIX bif: <bif:> SELECT DISTINCT ?child ?label_0\" + sparqlQuery.graph + \" WHERE { VALUES ?root { <\" + params.root + \"> } ?child \" + sparqlQuery.subclass + \"* ?root .\";\n\tlet i = 0;\n\tfor(let word of words){\n\t    if(word.match(/\\w{4}/)){\n\t\tquery += \" ?child <\" + sparqlQuery.label + \"> ?label_\" + i + \" .\";\n\t\tif(params.search == \"2\")  query += \" ?label_\" + i + ' bif:contains \"' + word + '\" .';\n\t\telse if(params.search == \"3\") query += \" ?label_\" + i + ' bif:contains \"\\'' + word + '*\\'\" .';\n\t\telse query += \" FILTER( REGEX( ?label_\" + i + \", '\" + word + \"', 'i'))\"; // default\n\t\ti++;\n\t    }\n\t}\n\tquery += \" } ORDER BY ?label\";\n\treturn query;\n    }\n\n    let getParentsQuery = (uri) => {\n\treturn \"SELECT DISTINCT ?parent\" + sparqlQuery.graph + \" WHERE { <\" + uri + \"> \" + sparqlQuery.subclass + \"* ?parent . }\";\n    }\n\n    let cacheData = {};\n    let renderHash = false;\n    let max = 0;\n\n    let appendElement = (tag, parent) => {\n\tlet element = document.createElement(tag);\n\tparent.appendChild(element);\n\treturn element;\n    }\n    \n    let renderColumn = (json, depth) => {\n\t// remove over depth columns\n\tif(json.results.bindings[0].parent && !cacheData[json.results.bindings[0].parent.value]) cacheData[json.results.bindings[0].parent.value] = json;\n\tlet div = stanza.select(\"#renderDiv\");\n\tfor(let i = depth; i <= max; i++){\n\t    stanza.root.getElementById(\"column_\" + i).remove();\n\t}\n\tmax = depth;\n\t// render new column\n\tlet column = appendElement(\"div\", div);\n\tlet ul = appendElement(\"ul\", column);\n\tcolumn.classList.add(\"column\");\n\tcolumn.setAttribute(\"id\", \"column_\" + depth);\n\tfor(let node of json.results.bindings){\n\t    let li = appendElement(\"li\", ul);\n\t    let label_inline_div = appendElement(\"div\", li);\n\t    let label_div = appendElement(\"div\", label_inline_div);\n\t    label_div.classList.add(\"label\");\n\t    label_div.innerHTML = node.label.value;\n\t    label_inline_div.classList.add(\"label_inline\");\n\t    if(node.leaf) li.classList.add(\"clickable\");\n\t    else li.classList.add(\"clickable_sp\");\n\t    li.onclick = function(){\n\t\tfor(let child of this.parentNode.childNodes){\n\t\t    child.classList.remove(\"selected\");\n\t\t}\n\t\tthis.classList.add(\"selected\");\n\t\tstanza.select(\"#dataInfo\").innerHTML = node.label.value + \"<br>\" + node.child.value;\n\t\tif(node.leaf){\n\t\t    if(cacheData[node.child.value]) renderColumn(cacheData[node.child.value], depth + 1);\n\t\t    else fetchReq(makeQuery(node.child.value), renderColumn, depth + 1);\n\t\t}\n\t    }\n\t    if(renderHash && renderHash[node.child.value]) li.classList.add(\"selected\");\n\t}\n\tcolumn.scrollIntoView();\n\tif(renderHash) renderNextFromSearch(json, depth + 1);\n    }\n    \n    let renderFirst = (json, depth) => {\n\tstanza.render({\n\t    template: \"stanza.html\"\n\t});\n\t// render first column\n\tlet column = appendElement(\"div\", stanza.select(\"#renderDiv\"));\n\tlet ul = appendElement(\"ul\", column);\n\tlet li = appendElement(\"li\", ul);\n\tlet label_inline_div = appendElement(\"div\", li);\n\tlet label_div = appendElement(\"div\", label_inline_div);\n\tcolumn.classList.add(\"column\");\n\tcolumn.setAttribute(\"id\", \"column_\" + depth);\n\tlabel_div.classList.add(\"label\");\n\tlabel_div.innerHTML = json.results.bindings[0].label.value;\n\tlabel_inline_div.classList.add(\"label_inline\");\n\tli.appendChild(label_inline_div);\n\tif(json.results.bindings[0].leaf){\n\t    li.classList.add(\"clickable\");\n\t    li.onclick = function(){\n\t\tthis.classList.add(\"selected\");\n\t\tstanza.select(\"#dataInfo\").innerHTML = json.results.bindings[0].label.value + \"<br>\" + params.root;\n\t\tfetchReq(makeQuery(params.root), renderColumn, depth + 1);\n\t    }\n\t}\n\t// add search action\n\tstanza.select(\"#pulldown\").style.top = stanza.select(\"#label_keywords\").offsetTop + 22 + \"px\";\n\tstanza.select(\"#pulldown\").style.left = stanza.select(\"#label_keywords\").offsetLeft + \"px\";\n\tstanza.select(\"#word_search\").onclick = function(){ startSearch(); };\n\tstanza.select(\"#label_keywords\").onkeydown = function(e){ if(e.key == \"Enter\") startSearch(); };\n    }\n\n    let renderStartFromSearch = (json) => {\n\trenderHash = {};\n\tfor(let node of json.results.bindings){\n\t    renderHash[node.parent.value] = true;\n\t}\n\tif(cacheData[params.root]) renderNextFromSearch(cacheData[params.root], 1);\n\telse fetchReq(makeQuery(params.root), renderColumn, 1);\n    }\n\n    let renderNextFromSearch = (json, depth) => {\n\tlet flag = true;\n\tfor(let node of json.results.bindings){\n\t    if(renderHash[node.child.value] && node.leaf){\n\t\tflag = false;\n\t\tif(cacheData[node.child.value]) renderColumn(cacheData[node.child.value], depth);\n\t\telse fetchReq(makeQuery(node.child.value), renderColumn, depth);\n\t\tbreak;\n\t    }\n\t}\n\tif(flag){\n\t    renderHash = false;\n\t}\n    }\n    \n    let renderSearchResult = (json, ) => {\n\tclearInterval(searchingTimer);\n\tstanza.select(\"#label_keywords\").value = searchString;\n\tsearchString = false;\n\tstanza.select(\"#pulldown\").innerHTML = \"\";\n\tlet ul = appendElement(\"ul\", stanza.select(\"#pulldown\"));\n\tif(json.results.bindings[0]){\n\t    for(let res of json.results.bindings){\n\t\tlet li = appendElement(\"li\", ul);\n\t\tli.innerHTML = res.label_0.value;\n\t\tli.onclick = function(){\n\t\t    stanza.select(\"#label_keywords\").value = res.label_0.value;\n\t\t    stanza.select(\"#pulldown\").style.display = \"none\";\n\t\t    stanza.select(\"#dataInfo\").innerHTML = res.label_0.value + \"<br>\" + res.child.value;\n\t\t    fetchReq(getParentsQuery(res.child.value), renderStartFromSearch, false);\n\t\t}\n\t\tli.onmouseover = function(){ this.style.backgroundColor = \"#cccccc\"; };\n\t\tli.onmouseout = function(){ this.style.backgroundColor = \"\"; };\n\t    }\n\t}else{\n\t    let li = appendElement(\"li\", ul);\n\t    li.innerHTML = \"no hit\";\n\t    li.onclick = function(){ stanza.select(\"#pulldown\").style.display = \"none\"; };\n\t\t\n\t}\n\tstanza.select(\"#pulldown\").style.display = \"block\";\n    }\n\n    let searchingTimer;\n    let searchingIndex = 0;\n    let searchString = false;\n    let searching = () => {\n\tsearchingIndex = (searchingIndex + 1) % 2;\n\tif(searchingIndex) stanza.select(\"#label_keywords\").value = searchString + \" ...\";\n\telse stanza.select(\"#label_keywords\").value = searchString;\n    }\n\n    let startSearch = () => {\n\tlet string = stanza.select(\"#label_keywords\").value;\n\tif(string.match(/\\w{3}/) && !searchString){\n\t    stanza.select(\"#pulldown\").style.display = \"none\";\n\t    searchString = string;\n\t    searchingTimer = setInterval(searching, 500);\n\t    fetchReq(searchQueryByBifContains(string), renderSearchResult, false);\n\t}\n    }\n    \n    fetchReq(firstQuery, renderFirst, 0);\n\t\n}\n","import { defineStanzaElement } from 'togostanza/src/stanza-element.mjs';\nimport main from './column_tree_view/index.js';\n\nconst metadata = {\"@context\":{\"stanza\":\"http://togostanza.org/resource/stanza#\"},\"@id\":\"column_tree_view\",\"stanza:label\":\"Column tree view\",\"stanza:definition\":\"Column viewer metastanza for tree and DAG structures.\",\"stanza:parameter\":[{\"stanza:key\":\"endpoint\",\"stanza:example\":\"https://integbio.jp/rdf/sparql\",\"stanza:description\":\"endpoint\",\"stanza:required\":true},{\"stanza:key\":\"root\",\"stanza:example\":\"http://identifiers.org/taxonomy/131567\",\"stanza:description\":\"root node\",\"stanza:required\":true},{\"stanza:key\":\"graph\",\"stanza:example\":\"http://integbio.jp/rdf/ontology/taxonomy\",\"stanza:description\":\"target graph\",\"stanza:required\":false},{\"stanza:key\":\"subclass\",\"stanza:example\":\"\",\"stanza:description\":\"target subclass predicate (default: rdfs:subClassOf)\",\"stanza:required\":false},{\"stanza:key\":\"label\",\"stanza:example\":\"\",\"stanza:description\":\"target label predicate (default: rdfs:label)\",\"stanza:required\":false},{\"stanza:key\":\"search\",\"stanza:example\":\"1\",\"stanza:description\":\"search method. 1: regex (default), 2: bif:contains(exact), 3: bif:contains(partial).\",\"stanza:required\":false}],\"stanza:usage\":\"<togostanza-column_tree_view endpoint='https://integbio.jp/rdf/sparql' root='http://identifiers.org/taxonomy/131567'></togostanza-column_tree_view>\",\"stanza:type\":\"MetaStanza\",\"stanza:context\":\"\",\"stanza:display\":\"\",\"stanza:provider\":\"DBCLS\",\"stanza:license\":\"MIT\",\"stanza:author\":\"Moriya, Yuki\",\"stanza:address\":\"moriya@dbcls.rois.ac.jp\",\"stanza:contributor\":[],\"stanza:created\":\"2020-07-21\",\"stanza:updated\":\"2020-07-21\"};\nconst outer    = null;\n\nconst templates = [\n    [\"stanza.html\", {\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<style>\\n  div#renderDiv{\\n      overflow-x: auto;\\n      white-space: nowrap;\\n      border: solid 3px #888888;\\n  }\\n  div.column {\\n      min-width: 300px;\\n      max-width: 300px;\\n      max-height: 300px;\\n      min-height: 300px;\\n      display: inline-flex;\\n      overflow-y: auto;\\n      border: solid 1px #888888;\\n      margin-right: -1px;\\n  }\\n  div.column ul {\\n      width: 300px;\\n      padding: 0px;\\n      margin: 0px;\\n  }\\n  div.column li {\\n      max-width: 300px;\\n      padding: 5px 10px 5px 10px;\\n      margin: 0px;\\n  }\\n  li div.label_inline {\\n      width: 260px;\\n      margin: 0px;\\n      padding: 0px;\\n      display: inline-block;\\n  }\\n  li div.label {\\n      width: 260px;\\n      overflow: hidden;\\n      text-overflow: ellipsis;\\n      white-space: nowrap;\\n      margin: 0px;\\n      padding: 0px;\\n      display: block;\\n  }\\n  li.clickable {\\n      color: #0f6385;\\n      cursor: pointer;\\n  }\\n  li.clickable_sp {\\n      cursor: pointer;\\n  }\\n  li.clickable::after{\\n      content: '';\\n      width: 7px;\\n      height: 7px;\\n      border: 0px;\\n      border-top: solid 2px #0f6385;\\n      border-right: solid 2px #0f6385;\\n      transform: rotate(45deg);\\n      position: relative;\\n      top: 4px;\\n      float: right;\\n}\\n  li.selected {\\n      background-color: #dddddd;\\n  }\\n  div#header {\\n      text-align: right;\\n      margin-bottom: 10px;\\n  }\\n  div#dataInfo {\\n      line-height: 20px;\\n  }\\n  div#pulldown {\\n      position: absolute;\\n      background-color: #eeeeee;\\n      border: solid 1px #888888;\\n      display: none;\\n      max-height: 300px;\\n      overflow-y: auto;\\n  }\\n  div#pulldown ul {\\n      list-style-type: none;\\n      margin: 5px 5px 5px 5px;\\n      padding: 0px 0px 0px 0px;\\n  }\\n  div#pulldown li {\\n      width: auto;\\n      font-size: 14px;\\n      cursor: pointer;\\n  }\\n</style>\\n\\n<div id=\\\"header\\\">\\n  <input type=\\\"text\\\" size=\\\"50\\\" id=\\\"label_keywords\\\">\\n  <input type=\\\"button\\\" id=\\\"word_search\\\" value=\\\"search\\\">\\n</div>\\n<div id=\\\"renderDiv\\\"></div>\\n<div id=\\\"dataInfo\\\"></div>\\n<div id=\\\"pulldown\\\"></div>\\n\";\n},\"useData\":true}],\n];\n\ndefineStanzaElement(main, {metadata, templates, outer, url: import.meta.url});\n"],"names":["main"],"mappings":"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"}