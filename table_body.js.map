{"version":3,"file":"table_body.js","sources":["stanza-repo/table_body/index.js","stanza-repo/table_body.js"],"sourcesContent":["export default function tableBody(stanza, params) {\n    let formBody = []\n    for (let key in params) {\n\tif(params[key] && key != \"table_data_api\") formBody.push(key + \"=\" + encodeURIComponent(params[key]))\n    }\n    let options = {\n\tmethod: \"POST\",\n\tmode:  \"cors\",\n\tbody: formBody.join(\"&\"),\n\theaders: {\n\t    \"Accept\": \"application/json\",\t    \n\t    'Content-Type': 'application/x-www-form-urlencoded'\n\t}\n    }\n    console.log(params);\n    console.log(options.body);\n    let url = params.table_data_api;\n    let q = fetch(url, options).then(res => res.json());\n    q.then(function(data){\n        stanza.render({\n            template: \"stanza.html\"\n        });\n        let div = stanza.select(\"#renderDiv\");\n\tlet table = document.createElement(\"table\");\n\tlet thead = document.createElement(\"thead\");\n\tlet tbody = document.createElement(\"tbody\");\t\n\tdiv.appendChild(table);\n\ttable.appendChild(thead);\n\ttable.appendChild(tbody);\n\t\n\tlet tr = document.createElement(\"tr\");\n\tthead.appendChild(tr);\n\tfor(let i in data.head.vars){\n\t    let th = document.createElement(\"th\");\n\t    th.innerHTML = data.head.vars[i];\n\t    tr.appendChild(th);\n        }\n        for(let i in data.results.bindings){\n\t    tr = document.createElement(\"tr\");\n\t    tbody.appendChild(tr);\n\t    for(let j in data.head.vars){\n\t\tlet td = document.createElement(\"td\");\n\t\ttd.innerHTML = data.results.bindings[i][data.head.vars[j]].value;\n\t\ttr.appendChild(td);\n            }\n\t}\n    });\n}\n","import { defineStanzaElement } from 'togostanza/src/stanza-element.mjs';\nimport main from './table_body/index.js';\n\nconst metadata = {\"@context\":{\"stanza\":\"http://togostanza.org/resource/stanza#\"},\"@id\":\"table_body\",\"stanza:label\":\"table body for pagination\",\"stanza:definition\":\"Greeting.\",\"stanza:parameter\":[{\"stanza:key\":\"table_data_api\",\"stanza:example\":\"https://sparql-support.dbcls.jp/rest/api/protein_list\",\"stanza:description\":\"table data api\",\"stanza:required\":true},{\"stanza:key\":\"limit\",\"stanza:example\":\"10\",\"stanza:description\":\"table page size\",\"stanza:required\":true},{\"stanza:key\":\"offset\",\"stanza:example\":\"0\",\"stanza:description\":\"page numbere\",\"stanza:required\":true},{\"stanza:key\":\"params\",\"stanza:example\":\"dataset='DS801_1'\",\"stanza:description\":\"parameters for table data api\",\"stanza:required\":false}],\"stanza:usage\":\"<togostanza-table_body></togostanza-table_body>\",\"stanza:type\":\"Stanza\",\"stanza:context\":\"\",\"stanza:display\":\"\",\"stanza:provider\":\"provider of this stanza\",\"stanza:license\":\"\",\"stanza:author\":\"author name\",\"stanza:address\":\"name@example.org\",\"stanza:contributor\":[],\"stanza:created\":\"2020-05-27\",\"stanza:updated\":\"2020-05-27\"};\nconst outer    = null;\n\nconst templates = [\n    [\"stanza.html\", {\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<style>\\n  table {\\n      width: 100%;\\n  }\\n  td {\\n      padding: 5px 20px 5px 20px;;\\n  }\\n  th {\\n      border-bottom: solid 2px #000000;\\n  }\\n</style>\\n\\n<div id=\\\"renderDiv\\\"></div>\\n\";\n},\"useData\":true}],\n];\n\ndefineStanzaElement(main, {metadata, templates, outer, url: import.meta.url});\n"],"names":["main"],"mappings":"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"}